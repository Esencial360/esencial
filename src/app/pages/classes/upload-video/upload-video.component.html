<app-header></app-header>
<section class="h-[75vh] w-full">
@if (isModalOpen) {
<div
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]"
>
  <div
    class="bg-white rounded-xl shadow-lg w-full max-w-lg p-6 relative animate-fadeIn"
  >
    <button
      (click)="closeModal()"
      class="absolute top-4 right-4 text-gray-500 hover:text-gray-700"
    >
      âœ•
    </button>
    @if (firstStep) {
    <h2 class="text-xl font-semibold text-gray-800 mb-4">Create a New Video</h2>
    <form [formGroup]="newVideoForm" class="space-y-6">
      <div>
        <label class="block text-gray-700 font-medium mb-1">Title</label>
        <input
          type="text"
          formControlName="title"
          placeholder="Enter video title"
          class="w-full p-3 border rounded-lg focus:ring focus:ring-gray-300 focus:outline-none"
          [ngClass]="{
            'border-red-500':
              newVideoForm.get('title')?.invalid &&
              (newVideoForm.get('title')?.dirty ||
                newVideoForm.get('title')?.touched)
          }"
        />
        <p
          *ngIf="
            newVideoForm.get('title')?.invalid &&
            (newVideoForm.get('title')?.dirty ||
              newVideoForm.get('title')?.touched)
          "
          class="text-red-500 text-sm"
        >
          Title is required.
        </p>
      </div>
      <div>
        <label class="block text-gray-700 font-medium mb-1">Category</label>
        <select
          formControlName="collectionId"
          class="w-full p-3 border rounded-lg focus:ring focus:ring-gray-300 focus:outline-none"
        >
          <option value="" disabled selected>Select a Category</option>
          @for (collection of collectionList; track $index;) {
          <option [value]="collection.guid">{{ collection.name }}</option>
          }
        </select>
      </div>
      <div>
        <label class="block text-gray-700 font-medium mb-1">Instructor</label>
        <select
          formControlName="instructor"
          class="w-full p-3 border rounded-lg focus:ring focus:ring-gray-300 focus:outline-none"
        >
          <option value="" selected>No Instructor</option>
          @for (singleInstructor of instructors; track $index;) {
          <option [value]="singleInstructor._id">
            {{ singleInstructor.firstname }} {{ singleInstructor.lastname }}
          </option>
          }
        </select>
      </div>
      <div>
        <button
          type="submit"
          (click)="onSubmit()"
          class="w-full py-3 bg-black text-white font-semibold rounded-lg hover:bg-gray-800 transition duration-200"
        >
          CREATE VIDEO
        </button>
      </div>
    </form>
    } @if (secondStep) {
    <div class="text-center space-y-4">
      <h2 class="text-lg font-semibold">Upload Your Video</h2>
      <input
        type="file"
        #videoInput
        (change)="onFileSelected($event)"
        class="border p-2 rounded w-full"
      />
      <button
        (click)="onUploadVideo()"
        class="w-full py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition duration-200"
      >
        Upload Video
      </button>
    </div>
    } @if (thirdStep) {
    <div class="flex flex-col items-center text-center space-y-4">
      <app-check-mark></app-check-mark>
      <h4 class="text-lg font-semibold">
        Your participation is essential to us!
      </h4>
      <p class="text-gray-600">
        Thank you for your video! We have received your material and will review
        it to provide feedback.
      </p>
      <h4 class="font-semibold">The ESENCIAL360 Team</h4>
      <button
        (click)="onProcessDone()"
        class="mt-5 py-3 px-6 bg-black text-white rounded-lg hover:bg-gray-800 transition duration-200"
      >
        HOME
      </button>
    </div>
    }
  </div>
</div>
} @else {
<section>
  <h2>Upload your class</h2>
  <app-button [text]="'click here'" (click)="openModal()"></app-button>
</section>
}
</section>
<app-footer></app-footer>
