
<div
  class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10"
  data-aos="fade-up"
  data-aos-duration="1000"
>
  @for (class of classes; track $index) {
    <div class="flex flex-col group" data-aos="zoom-in" [attr.data-aos-delay]="($index * 150).toString()">
      
      <!-- Main Card -->
      <div
        (click)="allInfo ? onClassSelected(class.video) : onClassSelected(class.video.guid)"
        class="relative overflow-hidden rounded-2xl shadow-xl hover:shadow-2xl max-w-md mx-auto cursor-pointer transition-all duration-500 transform hover:scale-105 hover:-translate-y-3 bg-white"
      >
        <!-- Image Container -->
        <div class="relative overflow-hidden">
          <img
            [src]="class?.safeThumbnail?.changingThisBreaksApplicationSecurity"
            alt="Clase de {{ class.video.title }}"
            class="w-full h-64 lg:h-72 object-cover transition-all duration-700 group-hover:scale-110"
            loading="lazy"
          />

          <!-- Enhanced gradient overlay -->
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent group-hover:from-black/70 group-hover:via-black/30 transition-all duration-500"></div>

          <!-- Top badges row -->
          <div class="absolute top-4 left-4 right-4 flex justify-between items-start z-20">
            <!-- Duration badge -->
            <div class="bg-white/95 backdrop-blur-sm text-strongBrown px-4 py-2 rounded-xl text-sm font-bold shadow-lg border border-white/20 transform group-hover:scale-105 transition-transform duration-300">
              <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
              </svg>
              {{ class.video.length | formatDuration }}
            </div>

            <!-- Difficulty badge with enhanced styling -->
            <div
              class="px-4 py-2 rounded-xl text-sm font-bold shadow-lg text-white backdrop-blur-sm border border-white/20 transform group-hover:scale-105 transition-transform duration-300"
              [ngClass]="{
                'bg-gradient-to-r from-emerald-500 to-emerald-600': class.difficulty === 'Principiante',
                'bg-gradient-to-r from-amber-500 to-orange-500': class.difficulty === 'Intermedio',
                'bg-gradient-to-r from-red-500 to-red-600': class.difficulty === 'Avanzado'
              }"
            >
              <svg class="w-4 h-4 inline mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
              </svg>
              {{ class.difficulty }}
            </div>
          </div>

          <!-- Class title with enhanced typography -->
          <div class="absolute inset-x-4 bottom-4 z-20">
            <h2 class="text-white text-xl lg:text-2xl font-bold uppercase text-center leading-tight mb-3 drop-shadow-lg group-hover:text-blue-100 transition-colors duration-300">
              {{ class.video.title }}
            </h2>
            
            <!-- Subtitle/description if available -->
            <div class="text-center">
              <div class="inline-flex items-center px-3 py-1 bg-white/20 backdrop-blur-sm rounded-full text-white/90 text-xs font-medium">
                <svg class="w-3 h-3 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Clase disponible
              </div>
            </div>
          </div>

          <!-- Enhanced play button overlay -->
          <div class="absolute inset-0 flex justify-center items-center opacity-0 group-hover:opacity-100 transition-all duration-300 z-10 bg-black/20">
            <div class="relative">
              <!-- Pulsing background -->
              <div class="absolute inset-0 bg-white/20 rounded-full animate-ping"></div>
              <div class="absolute inset-0 bg-white/10 rounded-full animate-pulse"></div>
              
              <!-- Play icon -->
              <div class="relative w-20 h-20 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-transform duration-300">
                <svg class="w-10 h-10 text-strongBrown ml-1" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M8 5v14l11-7z"/>
                </svg>
              </div>
            </div>
          </div>

          <!-- Decorative corner elements -->
          <div class="absolute top-0 right-0 w-0 h-0 border-t-[40px] border-r-[40px] border-t-white/10 border-r-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        </div>

        <!-- Card border effect -->
        <div class="absolute inset-0 border-2 border-transparent group-hover:border-white/20 rounded-2xl transition-colors duration-500 pointer-events-none"></div>

        <!-- Glow effect on hover -->
        <div class="absolute inset-0 rounded-2xl bg-gradient-to-r from-strongBrown/10 via-transparent to-strongBrown/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"></div>
      </div>

      <!-- Statistics Section (if not hidden) -->
      @if (!hideStatistics) {
        <div class="mt-6 transform group-hover:translate-y-1 transition-transform duration-300">
          <app-class-statistics
            [videoSource]="videoSource"
            [adminView]="true"
            [videoGuid]="class?.video?.guid"
            [previewView]="true"
            class="opacity-80 group-hover:opacity-100 transition-opacity duration-300"
          ></app-class-statistics>
        </div>
      }

      <!-- Additional info card (appears on hover) -->
      <div class="mt-4 p-4 bg-white rounded-xl shadow-md opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300">
        <div class="flex items-center justify-between text-sm text-gray-600">
          <div class="flex items-center">
            <svg class="w-4 h-4 mr-2 text-strongBrown" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            <span class="font-medium">Lista para reproducir</span>
          </div>
          
          <div class="flex items-center text-blue">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
            <span class="text-xs font-medium">Ver ahora</span>
          </div>
        </div>
      </div>
    </div>
  }
</div>